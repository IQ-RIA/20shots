// Generated by CoffeeScript 1.3.3

/*
	@author Ruslan Prytula
*/


(function() {

  define(["j/ux/plugins/lessMore/Plugin", "j/core/base/List", "j/collection/SearchCollection", "text!j/view/search/SearchList.tpl", "j/components/paging/Paging"], function(LessMorePlugin, List, Collection, tpl, Paging) {
    return List.extend({
      plugins: [LessMorePlugin],
      el: '.list.search',
      maskEl: ".list.search",
      modes: {
        "default": {
          tpl: _.template(tpl)
        }
      },
      initialize: function(config) {
        this.collection = new Collection;
        this.request = {};
        this.request.search = config.query;
        this.add({
          cls: Paging,
          ref: "Paging",
          el: ".search-paging",
          collection: this.collection
        });
        this.mon(this.getPaging(), "change", this.onPageChanged, this);
        return List.prototype.initialize.apply(this, arguments);
      },
      onPageChanged: function(paging, params) {
        _.extend(this.request, params);
        return this.loadData();
      }
    });
  });

}).call(this);
